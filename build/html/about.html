

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>About &mdash; adas_pro 1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="author" title="About these documents" href="#" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Installation" href="installation.html" />
    <link rel="prev" title="Adas Pro" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> adas_pro
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">About</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#table-of-contents">Table of Contents</a></li>
<li class="toctree-l2"><a class="reference internal" href="#features">Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dependences">Dependences</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#development">Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="#modules">Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-run">How-to-run</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#visualizer">Visualizer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#roadtest">Roadtest</a></li>
<li class="toctree-l3"><a class="reference internal" href="#evaluation">Evaluation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sample">Sample</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="gettingstarted.html">Getting Started</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="alarm.html">Alarm System</a></li>
<li class="toctree-l1"><a class="reference internal" href="config_docs/alarm_simulator_config_json.html">alarm_simulator_config.json 配置说明</a></li>
<li class="toctree-l1"><a class="reference internal" href="config_docs/calibration_json.html">calibration.json 配置说明</a></li>
<li class="toctree-l1"><a class="reference internal" href="config_docs/config_yml.html">config.yml 配置说明</a></li>
<li class="toctree-l1"><a class="reference internal" href="config_docs/evaluation_config_json.html">evaluation config.json 配置说明</a></li>
<li class="toctree-l1"><a class="reference internal" href="config_docs/roadtest_config.html">roadtest config.json 配置说明</a></li>
<li class="toctree-l1"><a class="reference internal" href="config_docs/sdk_config_json.html">sdk_config.json 配置说明</a></li>
<li class="toctree-l1"><a class="reference internal" href="config_docs/self_calibration_json.html">self_calibration.json 配置说明</a></li>
<li class="toctree-l1"><a class="reference internal" href="config_docs/visualizer_config.html">visualizer config.json 配置说明</a></li>
</ul>
<p class="caption"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">A.B</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">adas_pro</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>About</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/about.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="about">
<h1>About<a class="headerlink" href="#about" title="Permalink to this headline">¶</a></h1>
<p>This is a project developed by sensedrive team.</p>
<p>adas-pro project runs on only one model for lane detection, vehicle detection, pedestrian detection and cyclist detection. Freespace, lane type and traffic light/sign will be added very soon.</p>
<div class="section" id="table-of-contents">
<h2>Table of Contents<a class="headerlink" href="#table-of-contents" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="#features">Features</a></p></li>
<li><p><a class="reference external" href="#dependences">Dependences</a></p></li>
<li><p><a class="reference external" href="#installation">Installation</a></p></li>
<li><p><a class="reference external" href="#development">Development</a></p></li>
<li><p><a class="reference external" href="#modules">Modules</a></p></li>
<li><p><a class="reference external" href="#how-to-run">How-to-run</a></p>
<ul>
<li><p><a class="reference external" href="#visualizer">Visualizer</a></p></li>
<li><p><a class="reference external" href="#roadtest">Roadtest</a></p></li>
<li><p><a class="reference external" href="#evaluation">Evaluation</a></p></li>
<li><p><a class="reference external" href="#sample">Sample</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#see-also">See Also</a></p></li>
</ul>
</div>
<div class="section" id="features">
<h2>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<thead>
<tr>
<th align="left">Features</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Lane lines detection</td>
<td align="left">Lane line detection</td>
</tr>
<tr>
<td align="left">Lane departure warning</td>
<td align="left">Warning decison is based on the distance between car and lane line</td>
</tr>
<tr>
<td align="left">Objects detection</td>
<td align="left">Vehicle, pedestrian, cyclist and traffic sign/light detection</td>
</tr>
<tr>
<td align="left">Front collision warning</td>
<td align="left">Warning decision is based on the distance and the relative speed</td>
</tr>
<tr>
<td align="left">freespace detection</td>
<td align="left">Drivable region detection</td>
</tr>
</tbody>
</table></div>
<div class="section" id="dependences">
<h2>Dependences<a class="headerlink" href="#dependences" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>System dependences</p>
<ul>
<li><p><strong>cmake:</strong> an open-source, cross-platform family of tools designed to build, test and package software. <em><strong>version 3.0 and above is required.</strong></em></p></li>
<li><p><strong>opencv:</strong> Open Source Computer Vision Library. <em><strong>version 2.4.13 is required and located in <code class="docutils literal notranslate"><span class="pre">/usr/local/opencv-2.4.13</span></code></strong></em></p></li>
</ul>
</li>
<li><p>Gpu version specific dependences:</p>
<ul>
<li><p><strong>cuda:</strong> a parallel computing platform and programming model developed by NVIDIA for general computing on graphical processing units. <em><strong>version 8.0 is required.</strong></em></p></li>
<li><p><strong>cudnn:</strong> Deep Neural Network library is a GPU-accelerated library of primitives for deep neural networks. <em><strong>version 5.1 for aarch64 and version 5.0 for x86_64</strong></em></p></li>
</ul>
</li>
<li><p>Project dependences</p>
<ul>
<li><p><strong>gtest:</strong> http://gitlab.sz.sensetime.com/linan/gtest, only used in unittest</p></li>
<li><p><strong>cereal:</strong> https://github.com/USCiLab/cereal , only used in input and output serialization</p></li>
<li><p><strong>cppzmq:</strong> https://github.com/zeromq/cppzmq , only used in roadtest communication</p></li>
<li><p><strong>libzmq:</strong> https://github.com/zeromq/libzmq , only used in roadtest communication</p></li>
<li><p><strong>alglib:</strong> http://gitlab.hk.sensetime.com/SenseDrive/alglib</p></li>
<li><p><strong>protobuf:</strong> http://gitlab.sz.sensetime.com/linan/protobuf</p></li>
<li><p><strong>glog:</strong> https://github.com/google/glog.git</p></li>
<li><p><strong>gflags:</strong> https://github.com/gflags/gflags.git</p></li>
<li><p><strong>post_release_lib:</strong> http://gitlab.sz.sensetime.com/lijiabin/post_release_lib</p></li>
<li><p><strong>sdk_protector:</strong> http://gitlab.hk.sensetime.com/SenseDrive/sdk_protector</p></li>
<li><p><strong>sensedrive-core:</strong> http://gitlab.hk.sensetime.com/SenseDrive/sensedrive-core</p></li>
<li><p><strong>sensedrive-common:</strong> http://gitlab.hk.sensetime.com/SenseDrive/sensedrive-common</p></li>
<li><p><strong>object-detection:</strong> http://gitlab.hk.sensetime.com/SenseDrive/object-detection</p></li>
<li><p><strong>CNNiE-SoC:</strong> http://gitlab.sz.sensetime.com/maoningyuan/CNNiE-SoC.git, a fpga framework library</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>you can use the compile commands such as:</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># option 1. for cuda usage</span>
./hpcc --install --target-feature <span class="s2">&quot;cuda8_0;cudnn&quot;</span>
<span class="c1"># option 2. for cpu usage</span>
./hpcc --install --config -DUSE_CUDA<span class="o">=</span>OFF
<span class="c1"># option 3. for fpga usage</span>
./hpcc --install --target-arch armv7 --config -DUSE_CUDA<span class="o">=</span>OFF -DCUSTOMIZED_OPENCV_PATH<span class="o">=</span><span class="si">${</span><span class="nv">current_path</span><span class="si">}</span><span class="s2">&quot;/deps/opencv/armv7/&quot;</span> -DUSE_FPGA<span class="o">=</span>ON -DUSE_PROTOBUF<span class="o">=</span>OFF
</pre></div>
</div>
<ul class="simple">
<li><p>or the simpler commands:</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># option 1. for cuda usage</span>
sh compile.sh gpu
<span class="c1"># option 2. for cpu usage</span>
sh compile.sh cpu
<span class="c1"># option 3. for fpga usage</span>
sh compile.sh fpga
</pre></div>
</div>
</div>
<div class="section" id="development">
<h2>Development<a class="headerlink" href="#development" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>compile</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># step 1. config git lfs</span>
git config --global lfs.url <span class="s2">&quot;http://devcenter.bj.sensetime.com/api/v1/lfs/&quot;</span>
git config --global credential.helper store
<span class="c1"># step 2. clone the project and switch to Develop branch</span>
git clone git@gitlab.sz.sensetime.com:SenseDrive-China/adas.git
git checkout Develop
<span class="c1"># step 3. make sure that you can compile the code with no errors</span>
sh compile.sh fpga
<span class="c1"># step 4. describe your feature with an issue and checkout new branch</span>
git checkout -b ADASALPHA-ISSUEID_your_feature
<span class="c1"># step 5. cpplint checkout your code</span>
cpplint --recursive module_you_modified
<span class="c1"># step 6. make sure your git is clean</span>
git add .
git commit -m <span class="s2">&quot;ADASALPHA-ISSUEID your commit message&quot;</span>
git rebase HEAD~2
<span class="c1"># step 7. make sure your git can be merged directly</span>
git checkout Develop
git pull origin Develop
git checkout ADASALPHA-ISSUEID_your_feature
git rebase Develop
<span class="c1"># step 8. send a real merge request</span>
git push origin ADASALPHA-ISSUEID_your_feature -f
</pre></div>
</div>
</div>
<div class="section" id="modules">
<h2>Modules<a class="headerlink" href="#modules" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><strong>framework</strong>: framework contains the SDK part. no thirdparty library was used in SDK src code.</p></li>
<li><p><strong>c-api</strong>: c-api is a wrapper of SDK input and output. no SDK prototype was exported to user.</p></li>
<li><p><strong>roadtest</strong>: roadtest contains a solution for ADAS road test. It can transfer the results and images to the laptop through the ethernet, then the laptop will show the ADAS results on screen and save the orginal video and result video.</p></li>
<li><p><strong>visualizer</strong>: visualizer is used to run the algorithm and output the results such as lane lines, vehicle, pedestrian, cyclist and traffic sign.</p></li>
<li><p><strong>evaluation</strong>: evaluation is used to evaluate the detection models.With the images and the corespond groundtruth, it will output some algorithm index such as precision, accuracy, recall, mAP, mIou and so on.</p></li>
</ul>
</div>
<div class="section" id="how-to-run">
<h2>How-to-run<a class="headerlink" href="#how-to-run" title="Permalink to this headline">¶</a></h2>
<div class="section" id="visualizer">
<h3>Visualizer<a class="headerlink" href="#visualizer" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>gpu version</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> target/linux-x86_64_cuda8_0_cudnn5_1/Release/bin/visualizer/
<span class="c1"># change the config file, such as model file, input images path, output images path</span>
vi config_files/config.json
./visualizer config_files/config.json
</pre></div>
</div>
<ul class="simple">
<li><p>fpga version</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> target/linux-armv7/Release/bin/
scp -r ./visualizer root@172.20.7.209:/mnt/xxx
ssh root@172.20.7.209
<span class="nb">cd</span> /mnt/xxx
<span class="c1"># change the config file, such as model file, input images path, output images path</span>
vi config_files/config.json
./visualizer config_files/config.json
</pre></div>
</div>
</div>
<div class="section" id="roadtest">
<h3>Roadtest<a class="headerlink" href="#roadtest" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>embedded board</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> target/linux-armv7/Release/bin/
scp -r ./roadtest root@172.20.7.209:/mnt/xxx
ssh root@172.20.7.209
<span class="nb">cd</span> /mnt/xxx
<span class="c1"># change the config file, such as model file, input images path, output images path</span>
vi config_files/config.json
./roadtest_core config_files/config.json
</pre></div>
</div>
<ul class="simple">
<li><p>laptop</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> target/linux-x86_64/Release/bin/roadtest
<span class="c1"># change the config file, such as the sender&#39;s ip and output video path</span>
vi config_files/config.json
<span class="c1"># make sure you mkdir the output video directory</span>
mkdir original_videos <span class="o">&amp;&amp;</span> mkdir videos
./roadtest_preview config_files/config.json
</pre></div>
</div>
</div>
<div class="section" id="evaluation">
<h3>Evaluation<a class="headerlink" href="#evaluation" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Generate the image list file</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> tool/evaluation/scripts
<span class="c1"># change the test dateset root_path and the generated_list_file&#39;s saved_path</span>
vi generate_image_list_lane.py
python generate_image_list_lane.py
</pre></div>
</div>
<ul class="simple">
<li><p>Run the evaluation</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> target/linux-x86_64/Release/bin/evaluation
<span class="c1"># change the config file, such as the model path, input image size, dataset root path and dataset image list path</span>
vi config_files/config.json
./evaluation config_files/config.json
</pre></div>
</div>
</div>
<div class="section" id="sample">
<h3>Sample<a class="headerlink" href="#sample" title="Permalink to this headline">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> install/adas
mkdir build
cmake ..
./adas_detection_sample config_yml.example
</pre></div>
</div>
</div>
</div>
<div class="section" id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<p>Test Report shows some models speed test results.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="installation.html" class="btn btn-neutral float-right" title="Installation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Adas Pro" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, adas group

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>